# 媒体服务器整合（Emby/Jellyfin/NipaPlay）

## 服务器部署

如果您还没有自己的媒体服务器，可以参考以下资源进行部署：

### NipaPlay 局域网媒体共享

**新功能**：NipaPlay 支持设备间的媒体库共享，无需额外安装服务器软件。

**使用场景**：
- **PC共享给手机/平板**：电脑上的视频文件可以直接在手机上观看
- **客厅电视与卧室设备**：不同房间设备共享同一媒体库
- **临时共享**：朋友来访时快速分享自己的媒体资源

**设置步骤**：
1. **PC端开启共享**：在设置 → 远程访问 → 启用web服务器
2. **移动端连接**：在“共享媒体库”中点击“扫描局域网”选择设备；也可手动输入PC端局域网地址（如：192.168.1.100，默认端口 1180）
3. **开始观看**：媒体库中会显示PC端的视频，可直接播放

**优势**：
- 零配置：无需额外安装服务器软件
- 即用即看：移动端可直接观看PC端视频
- 节省空间：无需将视频拷贝到移动设备
- 自动刮削：采用hash匹配刮削，精准简单

### Jellyfin 部署指引

**部署指南**：
- [Jellyfin 官方文档](https://jellyfin.org/docs/general/installation/)（官方文档是英文的）
- [Docker 一键部署教程](https://hub.docker.com/r/jellyfin/jellyfin)
- 适合新手的 NAS 部署方案（群晖、威联通等）

**快速上手**：
1. **硬件要求**：至少 2GB 内存，支持硬件转码需要显卡
2. **系统支持**：Windows、Linux、macOS、Docker
3. **网络配置**：默认端口 8096，需要开放防火墙
4. **媒体库设置**：创建电影和剧集独立媒体库

**刮削器推荐**：

- **动漫内容**：推荐安装 [Bangumi 插件](https://github.com/kookxiang/jellyfin-plugin-bangumi)
  - 专门针对动漫优化的元数据刮削器
  - 支持番组计划(bgm.tv)数据源，中文信息更准确
  - 安装后在媒体库设置中启用 Bangumi 元数据提供器
- **电影/剧集**：使用默认的 TheMovieDB 和 TheTVDB 即可
- **定期更新**：建议开启定时刮削，保持元数据最新

### Emby 部署指引

**官方资源**：
- [Emby 服务器安装](https://emby.media/download.html)
- 免费版功能完整，付费版解锁高级功能


## 连接前准备

### 媒体库要求

NipaPlay 对媒体库类型有特定要求：

**✅ 支持的媒体库类型**：

- 电影媒体库（Movies）
- 剧集媒体库（TV Shows）

**❌ 不支持的媒体库类型**：

- 混合媒体库（Mixed Content）
- 文件夹类型的媒体库
- 其他自定义类型

**建议配置**：

- 在服务器端创建独立的电影和剧集媒体库
- 确保媒体文件有良好的刮削信息（海报、元数据、演员信息等）
- 避免将不同类型的媒体混合在同一个库中

### 性能考虑

**大型媒体库注意事项**：

- 媒体数量过于庞大（如上万个媒体）时，初次连接选择媒体库可能会出现加载缓慢
- 这是正常现象，耐心等待初次加载完成
- 后续访问会使用本地缓存，速度会明显提升

## 连接步骤

1. **打开设置**：设置 → 远程媒体库
2. **输入服务器信息**：
   - 服务器地址（IP:端口 或 域名）
   - 用户名和密码
   - 如使用 HTTPS，确保地址以 https:// 开头
3. **保存配置**：点击保存并等待连接验证
4. **选择媒体库**：连接成功后选择要同步的媒体库
5. **开始使用**：返回媒体库界面查看服务器内容

## 常见连接问题

### 连接失败

**检查项目**：

- 服务器地址和端口是否正确
- 网络连通性（同一局域网/公网访问）
- 用户名和密码是否准确
- 服务器是否正常运行

### 403 Forbidden 错误

**原因**：服务器管理员配置了客户端访问限制

**解决方案**：

- 联系服务器管理员
- 请求将 NipaPlay 加入客户端白名单
- 确认是否有特定的客户端标识要求

**注意**：此问题无法通过客户端设置解决，需要服务器端配合。

### 认证问题

**症状**：提示用户名或密码错误

**解决方案**：

- 确认服务器端账户信息
- 检查账户是否有媒体库访问权限
- 尝试在服务器端重置密码

### 播放异常

**问题**：能连接但无法播放内容

**解决方案**：

- 尝试切换播放器内核（Libmpv/MDK/Video Player）
- 检查服务器转码设置
- 确认网络带宽是否足够

---

**⬅️ 上一篇: [使用指南](user-guide.md)** | **➡️ 下一篇: [高级设置](settings.md)**
